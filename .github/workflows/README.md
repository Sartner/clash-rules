# GitHub Action è‡ªåŠ¨æ›´æ–°å·¥ä½œæµ

## ğŸ“‹ åŠŸèƒ½è¯´æ˜

æœ¬å·¥ä½œæµæ¯å¤©åŒ—äº¬æ—¶é—´å‡Œæ™¨4ç‚¹ï¼ˆUTC 20:00ï¼‰è‡ªåŠ¨æ£€æŸ¥å¹¶æ›´æ–°è§„åˆ™æ–‡ä»¶ã€‚

### å·¥ä½œæµç¨‹

1. **è§¦å‘æ—¶é—´**: æ¯å¤©åŒ—äº¬æ—¶é—´å‡Œæ™¨4ç‚¹è‡ªåŠ¨è¿è¡Œ
2. **æ‰§è¡Œæ­¥éª¤**:
   - æ£€å‡ºæœ€æ–°ä»£ç 
   - è®¾ç½®Pythonç¯å¢ƒ
   - ä¸‹è½½å¹¶å®‰è£…ä¾èµ–
   - è¿è¡Œ `merge_rules.py` ç”Ÿæˆè§„åˆ™æ–‡ä»¶
   - è®¡ç®—æ–°æ–‡ä»¶çš„MD5å€¼
   - ä¸ä¸Šæ¬¡æäº¤çš„MD5è¿›è¡Œæ¯”è¾ƒ
   - å¦‚æœæœ‰å˜åŒ–ï¼Œè‡ªåŠ¨æäº¤å¹¶æ¨é€åˆ°ä¸»åˆ†æ”¯
   - å¦‚æœæ— å˜åŒ–ï¼Œä¸æ‰§è¡Œä»»ä½•æ“ä½œ

### æ‰‹åŠ¨è§¦å‘

å¯ä»¥åœ¨GitHub Actionsé¡µé¢æ‰‹åŠ¨è§¦å‘ï¼Œæ”¯æŒå¼ºåˆ¶æ›´æ–°æ¨¡å¼ï¼ˆå¿½ç•¥MD5æ£€æŸ¥ï¼‰ã€‚

## âš™ï¸ é…ç½®è¯´æ˜

### å·¥ä½œæµæ–‡ä»¶ä½ç½®
`.github/workflows/update-rules.yml`

### å…³é”®é…ç½®

- **è§¦å‘æ—¶é—´**: `cron: '0 20 * * *'` (UTCæ—¶é—´)
- **ç›®æ ‡åˆ†æ”¯**: `main`
- **è¾“å‡ºç›®å½•**: `scripts/`

## ğŸ”§ æ½œåœ¨é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

### 1. ç¬¬ä¸€æ¬¡è¿è¡Œ
**é—®é¢˜**: ç¬¬ä¸€æ¬¡è¿è¡Œæ²¡æœ‰å†å²MD5å¯ä»¥æ¯”è¾ƒ

**è§£å†³æ–¹æ¡ˆ**: å·¥ä½œæµä¼šæ£€æµ‹åˆ°æ‰€æœ‰æ–‡ä»¶éƒ½æ˜¯æ–°æ–‡ä»¶å¹¶æäº¤ã€‚åç»­è¿è¡Œä¼šæ­£å¸¸å·¥ä½œã€‚

### 2. ç½‘ç»œé—®é¢˜
**é—®é¢˜**: å¤–éƒ¨URLä¸‹è½½å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**:
- è„šæœ¬å†…ç½®äº†é‡è¯•æœºåˆ¶ï¼ˆ3æ¬¡é‡è¯•ï¼Œ60ç§’è¶…æ—¶ï¼‰
- å·¥ä½œæµä¼šå› ç½‘ç»œé—®é¢˜è€Œå¤±è´¥
- ä¸‹æ¬¡è¿è¡Œæ—¶ä¼šè‡ªåŠ¨é‡è¯•

### 3. æƒé™é—®é¢˜
**é—®é¢˜**: å·¥ä½œæµæ— æ³•æ¨é€åˆ°ä»“åº“

**è§£å†³æ–¹æ¡ˆ**:
- ç¡®ä¿ä»“åº“è®¾ç½®äº†æ­£ç¡®çš„æƒé™
- `Settings` > `Actions` > `General` > `Workflow permissions`
- é€‰æ‹© "Read and write permissions"

### 4. åˆ†æ”¯ä¿æŠ¤
**é—®é¢˜**: å¦‚æœä¸»åˆ†æ”¯è®¾ç½®äº†ä¿æŠ¤è§„åˆ™ï¼Œæ¨é€ä¼šè¢«æ‹’ç»

**è§£å†³æ–¹æ¡ˆ**:
- åœ¨åˆ†æ”¯ä¿æŠ¤è§„åˆ™ä¸­å…è®¸GitHub Actionså†™å…¥
- æˆ–æ”¹ä¸ºåˆ›å»ºPull Requestè€Œä¸æ˜¯ç›´æ¥æ¨é€

## ğŸ“Š å·¥ä½œæµçŠ¶æ€

å¯ä»¥åœ¨GitHubä»“åº“çš„ `Actions` æ ‡ç­¾é¡µæŸ¥çœ‹å·¥ä½œæµè¿è¡ŒçŠ¶æ€ã€‚

æ¯æ¬¡è¿è¡Œåä¼šæ˜¾ç¤ºï¼š
- è¿è¡Œæ—¶é—´
- æ˜¯å¦å‘ç”Ÿå˜åŒ–
- å„æ–‡ä»¶çš„MD5å€¼
- æäº¤ä¿¡æ¯

## ğŸ”„ æ‰‹åŠ¨æµ‹è¯•

```bash
# æœ¬åœ°è¿è¡Œè„šæœ¬
python3 scripts/merge_rules.py --config scripts/config.yaml

# éªŒè¯ç”Ÿæˆçš„MD5
md5sum scripts/sartner-*.yaml
```

## ğŸ“ æäº¤æ¶ˆæ¯æ ¼å¼

è‡ªåŠ¨æäº¤çš„æ ¼å¼ï¼š
```
ğŸ¤– è‡ªåŠ¨æ›´æ–°è§„åˆ™æ–‡ä»¶ - YYYY-MM-DD HH:MM:SS

- AIè§„åˆ™: <MD5å€¼>
- ç¤¾äº¤åª’ä½“: <MD5å€¼>
- æµåª’ä½“: <MD5å€¼>

[skip ci]
```

## ğŸ› æ•…éšœæ’é™¤

### å·¥ä½œæµä¸€ç›´å¤±è´¥
1. æ£€æŸ¥Actionsé¡µé¢çš„é”™è¯¯æ—¥å¿—
2. ç¡®è®¤ç½‘ç»œè¿æ¥æ­£å¸¸
3. éªŒè¯é…ç½®æ–‡ä»¶è¯­æ³•
4. æ‰‹åŠ¨è¿è¡Œè„šæœ¬æµ‹è¯•

### æ–‡ä»¶æœªæ›´æ–°ä½†åº”è¯¥æœ‰å˜åŒ–
1. æ£€æŸ¥æ˜¯å¦æœ‰äººæ‰‹åŠ¨ä¿®æ”¹äº†æ–‡ä»¶
2. éªŒè¯MD5è®¡ç®—é€»è¾‘
3. æ‰‹åŠ¨è§¦å‘å¼ºåˆ¶æ›´æ–°

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [GitHub Actions æ–‡æ¡£](https://docs.github.com/en/actions)
- [schedule è§¦å‘å™¨](https://docs.github.com/en/actions/using-workflows/events-that-trigger-workflows#schedule)
- [workflow_dispatch](https://docs.github.com/en/actions/using-workflows/events-that-trigger-workflows#workflow_dispatch)
